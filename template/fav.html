<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<style>
  body { background-color: #f0f0f0; }
  .favorites-container { margin-top: 20px; }
  .favorite-img { margin: 10px; max-width: 100%; max-height: 300px; object-fit: cover; border-radius: 5px; display: block; }
  .img-container { position: relative; max-width: 100%; height: 300px; overflow: hidden; }
  .delete-btn { position: absolute; top: 10px; right: 10px; background-color: rgba(255,0,0,0.7); color: white; border: solid red 2px; padding: 
  5px 10px; border-radius: 5px; cursor: pointer; }
</style>
</head>
<body>

<div class="container favorites-container">
  <h2 class="text-center my-4">My Favorites</h2>
  <div class="row" id="favoritesRow"></div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyC7euLuQsnVFLJTAPvIZY09EQM_envFZeE",
    authDomain: "closet-notes.firebaseapp.com",
    projectId: "closet-notes",
    storageBucket: "closet-notes.firebasestorage.app",
    messagingSenderId: "268969012434",
    appId: "1:268969012434:web:cc9026f73cf7f41742d10b"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  async function loadFavorites() {
    const favoritesRow = document.getElementById("favoritesRow");
    favoritesRow.innerHTML = ""; // clear container

    const snapshot = await db.collection("favorites").orderBy("timestamp", "desc").get();
    snapshot.forEach(doc => {
      const data = doc.data();
      const col = document.createElement("div");
      col.className = "col-md-4 col-sm-6 mb-3";

      col.innerHTML = `
        <div class="img-container">
          <img src="${data.url}" class="favorite-img" />
          <button class="delete-btn">Delete</button>
        </div>
      `;

      col.querySelector(".delete-btn").addEventListener("click", async () => {
        await db.collection("favorites").doc(doc.id).delete();
        col.remove();
      });

      favoritesRow.appendChild(col);
    });
  }

  window.onload = loadFavorites;
</script>

</body>
</html>
